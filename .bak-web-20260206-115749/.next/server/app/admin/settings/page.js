(()=>{var e={};e.id=140,e.ids=[140],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6571:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>d}),r(6649),r(1595),r(8714);var s=r(3653),n=r(4966),a=r(6070),l=r.n(a),i=r(2555),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["admin",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6649)),"C:\\dev\\saas-factory\\apps\\web\\app\\admin\\settings\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1595)),"C:\\dev\\saas-factory\\apps\\web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,8714,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\dev\\saas-factory\\apps\\web\\app\\admin\\settings\\page.tsx"],c="/admin/settings/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/settings/page",pathname:"/admin/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6273:(e,t,r)=>{Promise.resolve().then(r.bind(r,419)),Promise.resolve().then(r.bind(r,4496)),Promise.resolve().then(r.bind(r,6001))},132:()=>{},4711:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,417,23)),Promise.resolve().then(r.t.bind(r,181,23)),Promise.resolve().then(r.t.bind(r,7814,23)),Promise.resolve().then(r.t.bind(r,5266,23)),Promise.resolve().then(r.t.bind(r,490,23)),Promise.resolve().then(r.t.bind(r,2648,23))},419:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(2064),n=r(5032),a=r(303);function l(){(0,a.useSearchParams)();let[e,t]=(0,n.useState)(null),[r,l]=(0,n.useState)(!1),[i,o]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),[c,m]=(0,n.useState)(null),p=async()=>{u(null),o(!0);try{let e=new URLSearchParams({tenantId:"default"}),t=await fetch(`/api/proxy/admin/line/auth-url?${e.toString()}`,{method:"GET",cache:"no-store"});if(!t.ok)throw Error(`Request failed with status ${t.status}`);let r=await t.json();if(!r.ok||!r.url)throw Error(r.error??"LINE auth-url is missing");window.location.href=r.url}catch(e){u(e instanceof Error?e.message:"LINE連携の開始に失敗しました"),console.error("Failed to start LINE auth flow",e)}finally{o(!1)}},[x,f]=(0,n.useState)(!1),h=async()=>{try{f(!0),u(null),await h();return}catch(e){u(String(e?.message??e))}finally{f(!1)}};return(0,s.jsxs)("main",{className:"p-6 max-w-3xl mx-auto space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold",children:"Admin Settings"}),c&&s.jsx("div",{className:"rounded-md border border-green-200 bg-green-50 px-4 py-2 text-sm text-green-800",children:c}),d&&s.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-4 py-2 text-sm text-red-800",children:d}),(0,s.jsxs)("section",{className:"rounded-xl border border-gray-200 bg-white p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"font-medium",children:"LINE 連携"}),s.jsx("p",{className:"text-xs text-gray-500",children:"予約通知や自動営業のために、LINE公式アカウントと接続します。"})]}),s.jsx("span",{className:"text-xs px-2 py-1 rounded-full border bg-gray-50",children:r||!e?"確認中...":"linked"===e.kind||"connected"===e.kind?"連携済み":"unconfigured"===e.kind?"未設定":"未連携"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{onClick:p,disabled:i,className:"px-4 py-2 text-sm rounded-lg border border-gray-300 bg-white hover:bg-gray-50 disabled:opacity-50",children:e?.kind==="connected"?i?"再連携中...":"LINEを再連携する":i?"連携中...":"LINEと連携する"}),s.jsx("button",{onClick:h,disabled:x,className:"px-3 py-2 text-xs rounded-lg border border-gray-200 bg-gray-50 hover:bg-gray-100 disabled:opacity-50",children:"ステータス再取得"})]}),e?.kind==="disconnected"&&"expired"===e.reason&&s.jsx("p",{className:"text-xs text-amber-600",children:"連携の有効期限が切れています。もう一度「LINEと連携する」を押して再接続してください。"})]})]})}},303:(e,t,r)=>{"use strict";var s=r(246);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},4496:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let s=r(8887);function n(e){let{reason:t,children:r}=e;throw new s.BailoutToCSRError(t)}},6001:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return a}});let s=r(2064),n=r(4580);function a(e){let{moduleIds:t}=e,r=(0,n.getExpectedRequestStore)("next/dynamic css"),a=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));a.push(...t)}}return 0===a.length?null:(0,s.jsx)(s.Fragment,{children:a.map(e=>(0,s.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},6649:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(9222),n=r(5077),a=r.n(n),l=r(657);let i=a()(()=>r.e(691).then(r.bind(r,691)),{loadableGenerated:{modules:["app\\admin\\settings\\page.tsx -> ./AdminSettingsClient"]},ssr:!1});function o(){return s.jsx(l.Suspense,{fallback:s.jsx("div",{className:"p-6 text-sm text-gray-500",children:"Loading settings..."}),children:s.jsx(i,{})})}},1595:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(9222);function n({children:e}){return s.jsx("html",{lang:"ja",children:s.jsx("body",{children:e})})}r(6557)},5077:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let s=r(1569);r(9222),r(657);let n=s._(r(9242));function a(e,t){var r;let s={loading:e=>{let{error:t,isLoading:r,pastDelay:s}=e;return null}};"function"==typeof e&&(s.loader=e);let a={...s,...t};return(0,n.default)({...a,modules:null==(r=a.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9314:(e,t,r)=>{"use strict";let{createProxy:s}=r(1924);e.exports=s("C:\\dev\\saas-factory\\node_modules\\.pnpm\\next@14.2.35_react-dom@18.3.1_react@18.3.1__react@18.3.1\\node_modules\\next\\dist\\shared\\lib\\lazy-dynamic\\dynamic-bailout-to-csr.js")},9242:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let s=r(9222),n=r(657),a=r(9314),l=r(5914);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let t={...o,...e},r=(0,n.lazy)(()=>t.loader().then(i)),d=t.loading;function u(e){let i=d?(0,s.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.PreloadCss,{moduleIds:t.modules}),(0,s.jsx)(r,{...e})]}):(0,s.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(r,{...e})});return(0,s.jsx)(n.Suspense,{fallback:i,children:o})}return u.displayName="LoadableComponent",u}},5914:(e,t,r)=>{"use strict";let{createProxy:s}=r(1924);e.exports=s("C:\\dev\\saas-factory\\node_modules\\.pnpm\\next@14.2.35_react-dom@18.3.1_react@18.3.1__react@18.3.1\\node_modules\\next\\dist\\shared\\lib\\lazy-dynamic\\preload-css.js")},6557:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[295],()=>r(6571));module.exports=s})();