(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[372],{4824:function(e,r,t){Promise.resolve().then(t.bind(t,5652))},2842:function(e,r,t){"use strict";t.d(r,{Z:function(){return b}});var a=t(5853),n=t(4254),s=t(7798),i=t(3790),d=t(6659),l=t(6780),c=t(6734),o=t(2043),m=t(857),u=t(7935),x=t(9452);function b(){let[e,r]=(0,n.useState)([]),[t,b]=(0,n.useState)(!1),[h,p]=(0,n.useState)(null),[f,j]=(0,n.useState)(!1),[g,v]=(0,n.useState)(null),[y,N]=(0,n.useState)({name:"",price:0,durationMin:60,active:!0,sortOrder:0}),w=async()=>{b(!0),p(null);try{let e=await (0,s.r7)();Array.isArray(e)?r(e):(console.warn("fetchMenu: menu is not an array, setting to empty array"),r([]))}catch(e){p(e instanceof i.GY?e.message:e instanceof Error?e.message:"Failed to fetch menu"),r([])}finally{b(!1)}};(0,n.useEffect)(()=>{w()},[]);let k=e=>{v(e),N({name:e.name,price:e.price,durationMin:e.durationMin,active:e.active,sortOrder:e.sortOrder}),j(!0)},Z=async()=>{if(!y.name.trim()){p("メニュー名は必須です");return}if(y.price<0){p("価格は0以上である必要があります");return}if(y.durationMin<=0){p("所要時間は1分以上である必要があります");return}b(!0),p(null);try{g?await (0,s.Uf)(g.id,{name:y.name.trim(),price:y.price,durationMin:y.durationMin,active:y.active,sortOrder:y.sortOrder}):await (0,s.LW)({name:y.name.trim(),price:y.price,durationMin:y.durationMin,active:y.active,sortOrder:y.sortOrder}),await w(),j(!1)}catch(e){p(e instanceof i.GY?e.message:e instanceof Error?e.message:"Failed to save menu item")}finally{b(!1)}},M=async e=>{b(!0),p(null);try{await (0,s.Uf)(e.id,{active:!e.active}),await w()}catch(e){p(e instanceof i.GY?e.message:e instanceof Error?e.message:"Failed to update menu item")}finally{b(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(l.Z,{title:"メニュー管理",subtitle:"メニューの追加・編集を行います。",right:(0,a.jsxs)("button",{onClick:()=>{v(null),N({name:"",price:0,durationMin:60,active:!0,sortOrder:e.length}),j(!0)},className:"px-4 py-2 bg-brand-primary text-white rounded-xl font-medium hover:shadow-md transition-all flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"追加"})]})}),h&&(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-2xl",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:h})}),(0,a.jsx)(d.Z,{children:t&&0===e.length?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"}),(0,a.jsx)("span",{className:"ml-3 text-sm text-brand-muted",children:"読み込み中..."})]}):(0,a.jsx)(c.Z,{headers:["メニュー名","価格","所要時間","状態","操作"],rows:e.map(e=>[e.name,"\xa5".concat(e.price.toLocaleString()),"".concat(e.durationMin,"分"),(0,a.jsx)(o.Z,{variant:e.active?"success":"muted",children:e.active?"有効":"無効"},"status"),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>k(e),className:"p-2 text-brand-primary hover:bg-brand-bg rounded-lg transition-all",title:"編集",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>M(e),className:"p-2 text-brand-muted hover:bg-brand-bg rounded-lg transition-all",title:e.active?"無効化":"有効化",children:(0,a.jsx)(x.Z,{className:"w-4 h-4"})})]},"actions")])})}),f&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>j(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-soft max-w-md w-full p-6 space-y-4",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-brand-text",children:g?"メニューを編集":"メニューを追加"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"メニュー名 *"}),(0,a.jsx)("input",{type:"text",value:y.name,onChange:e=>N({...y,name:e.target.value}),className:"w-full px-4 py-3 border border-brand-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",placeholder:"メニュー名"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"価格 *"}),(0,a.jsx)("input",{type:"number",value:y.price,onChange:e=>N({...y,price:parseInt(e.target.value)||0}),className:"w-full px-4 py-3 border border-brand-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",min:"0",placeholder:"0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"所要時間（分） *"}),(0,a.jsx)("input",{type:"number",value:y.durationMin,onChange:e=>N({...y,durationMin:parseInt(e.target.value)||60}),className:"w-full px-4 py-3 border border-brand-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",min:"1",placeholder:"60"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"active",checked:y.active,onChange:e=>N({...y,active:e.target.checked}),className:"w-4 h-4 text-brand-primary border-brand-border rounded focus:ring-brand-primary"}),(0,a.jsx)("label",{htmlFor:"active",className:"text-sm text-brand-text",children:"有効"})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,a.jsx)("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-3 bg-white text-brand-text border border-brand-border rounded-xl font-medium hover:shadow-md transition-all",children:"キャンセル"}),(0,a.jsx)("button",{onClick:Z,disabled:t||!y.name.trim(),className:"flex-1 px-4 py-3 bg-brand-primary text-white rounded-xl font-medium hover:shadow-md focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2 disabled:bg-brand-muted disabled:cursor-not-allowed transition-all",children:t?"保存中...":"保存"})]})]})})]})}},6659:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});var a=t(5853);function n(e){let{title:r,subtitle:t,children:n,className:s=""}=e;return(0,a.jsxs)("div",{className:"rounded-2xl bg-white border border-brand-border shadow-soft p-6 md:p-8 ".concat(s),children:[r&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-brand-text",children:r}),t&&(0,a.jsx)("p",{className:"text-sm text-brand-muted mt-1",children:t})]}),n]})}},6734:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});var a=t(5853);function n(e){let{columns:r,data:t,keyExtractor:n,loading:s=!1,emptyMessage:i="データがありません",onRowClick:d,headers:l,rows:c}=e,o=Array.isArray(t)?t:[],m=Array.isArray(r)?r:[],u=Array.isArray(l)?l:[],x=Array.isArray(c)?c:[];return s?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"}),(0,a.jsx)("span",{className:"ml-3 text-sm text-brand-muted",children:"読み込み中..."})]}):u.length>0?0===x.length?(0,a.jsx)("div",{className:"bg-brand-bg rounded-2xl p-8 text-center",children:(0,a.jsx)("p",{className:"text-sm text-brand-muted",children:i})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-brand-border",children:[(0,a.jsx)("thead",{className:"bg-brand-bg",children:(0,a.jsx)("tr",{children:u.map((e,r)=>(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-brand-muted uppercase tracking-wider",children:e},r))})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-brand-border",children:x.map((e,r)=>(0,a.jsx)("tr",{className:"transition-colors hover:bg-brand-bg",children:Array.isArray(e)?e.map((e,r)=>(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e},r)):null},r))})]})}):0===m.length||0===o.length?(0,a.jsx)("div",{className:"bg-brand-bg rounded-2xl p-8 text-center",children:(0,a.jsx)("p",{className:"text-sm text-brand-muted",children:i})}):n?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-brand-border",children:[(0,a.jsx)("thead",{className:"bg-brand-bg",children:(0,a.jsx)("tr",{children:m.map(e=>(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-brand-muted uppercase tracking-wider",children:e.label},e.key))})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-brand-border",children:o.map(e=>(0,a.jsx)("tr",{onClick:()=>null==d?void 0:d(e),className:"transition-colors ".concat(d?"hover:bg-brand-bg cursor-pointer":"hover:bg-brand-bg"),children:m.map(r=>{var t;return(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:r.render?r.render(e):String(null!==(t=e[r.key])&&void 0!==t?t:"")},r.key)})},n(e)))})]})}):(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 text-center",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:"keyExtractor is required when using columns/data format"})})}},6780:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var a=t(5853),n=t(4254);function s(e){let{title:r,subtitle:t,right:s}=e,[i,d]=(0,n.useState)(!1),[l,c]=(0,n.useState)(null);return(0,n.useEffect)(()=>{d(!0)},[]),(0,a.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-brand-text",children:r}),t&&(0,a.jsx)("p",{className:"text-sm text-brand-muted mt-2",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[i&&l&&(0,a.jsxs)("span",{className:"px-2 py-1 text-xs font-mono text-brand-muted bg-brand-bg border border-brand-border rounded-md",children:["api: ",l]}),s&&(0,a.jsx)("div",{className:"flex items-center gap-2",children:s})]})]})}},5652:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var a=t(5853),n=t(2619),s=t(645),i=t(1182),d=t(2842);function l(){return(0,a.jsx)(n.Z,{sidebar:(0,a.jsx)(i.Z,{}),topbar:(0,a.jsx)(s.Z,{title:"メニュー管理",subtitle:"メニューの追加・編集を行います。"}),children:(0,a.jsx)(d.Z,{})})}},7935:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(3035).Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},9452:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(3035).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[856,269,285,749,744],function(){return e(e.s=4824)}),_N_E=e.O()}]);