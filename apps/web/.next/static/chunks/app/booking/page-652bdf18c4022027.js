(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[355],{8265:function(t,e,n){Promise.resolve().then(n.bind(n,7176)),Promise.resolve().then(n.bind(n,1817))},3790:function(t,e,n){"use strict";n.d(e,{GY:function(){return o},QW:function(){return c},R1:function(){return i},nc:function(){return u},pE:function(){return f},sg:function(){return s}});var r=n(3206);class o extends Error{constructor(t,e,n,r){super(t),this.name="ApiClientError",this.status=e,this.statusText=n,this.data=r}}async function a(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.startsWith("/api/proxy/")?t:"".concat((r.env.NEXT_PUBLIC_API_BASE||"http://127.0.0.1:8787").replace(/\/$/,"")).concat(t.startsWith("/")?t:"/".concat(t)),i=null!==(e=n.timeout)&&void 0!==e?e:3e4,s=new AbortController,c=setTimeout(()=>s.abort(),i);try{let t;let e=await fetch(a,{...n,signal:s.signal,headers:{"Content-Type":"application/json",...n.headers}});clearTimeout(c);let r=e.headers.get("content-type");if(r&&r.includes("application/json"))try{t=await e.json()}catch(t){throw new o("Failed to parse JSON response",e.status,e.statusText)}else t=await e.text();if(!e.ok){let n=t&&"object"==typeof t&&"error"in t&&"string"==typeof t.error?t.error:t&&"object"==typeof t&&"message"in t&&"string"==typeof t.message?t.message:"API request failed: ".concat(e.status," ").concat(e.statusText);throw new o(n,e.status,e.statusText,t)}return t}catch(t){if(clearTimeout(c),t instanceof Error&&"AbortError"===t.name)throw new o("Request timeout after ".concat(i,"ms"));if(t instanceof o)throw t;if(t instanceof Error)throw new o(t.message);throw new o("Unknown error occurred")}}async function i(t,e){return a(t,{...e,method:"GET"})}async function s(t,e,n){return a(t,{...n,method:"POST",body:e?JSON.stringify(e):void 0})}async function c(t,e,n){return a(t,{...n,method:"DELETE",body:e?JSON.stringify(e):void 0})}async function u(t,e,n){return a(t,{...n,method:"PATCH",body:e?JSON.stringify(e):void 0})}async function f(t,e,n){return a(t,{...n,method:"PUT",body:e?JSON.stringify(e):void 0})}},7798:function(t,e,n){"use strict";n.d(e,{Dh:function(){return c},FJ:function(){return o},Gw:function(){return w},IF:function(){return i},Ip:function(){return p},LW:function(){return d},Ml:function(){return s},Qf:function(){return f},Rr:function(){return a},Uf:function(){return l},VP:function(){return y},jK:function(){return u},r7:function(){return h}});var r=n(3790);async function o(t,e){try{let n=new URLSearchParams({date:t});n.append("tenantId","default"),e&&"any"!==e&&n.append("staffId",e);let o=await fetch("/api/proxy/slots?".concat(n.toString()),{method:"GET",headers:{accept:"application/json"},cache:"no-store"});if(!o.ok){let t;let e=await o.text();try{t=e?JSON.parse(e):{}}catch(n){t={error:e||"HTTP ".concat(o.status)}}throw new r.GY(t.error||t.message||"Failed to fetch slots: ".concat(o.status),o.status)}return await o.json()}catch(t){if(t instanceof r.GY)throw t;throw new r.GY(t instanceof Error?t.message:"Failed to fetch slots")}}async function a(t){try{return await (0,r.sg)("/reserve",t)}catch(t){if(t instanceof r.GY)throw t;throw new r.GY("Failed to create reservation")}}async function i(t){try{let e=await (0,r.R1)("/admin/reservations?date=".concat(encodeURIComponent(t)));if(e.reservations&&!Array.isArray(e.reservations))return console.warn("getReservations: response.reservations is not an array, setting to empty array"),{...e,reservations:[]};return e}catch(t){if(t instanceof r.GY)throw t;throw new r.GY("Failed to fetch reservations")}}async function s(t){try{return await (0,r.QW)("/admin/reservations/".concat(encodeURIComponent(t)))}catch(t){if(t instanceof r.GY)throw t;throw new r.GY("Failed to cancel reservation")}}async function c(){try{let t=await (0,r.R1)("/admin/staff");if(t.ok&&t.data){if(!Array.isArray(t.data))return console.warn("getStaff: response.data is not an array, returning empty array"),[];return t.data.filter(t=>t.active).sort((t,e)=>t.sortOrder-e.sortOrder)}throw new r.GY(t.error||"Failed to fetch staff")}catch(t){if(t instanceof r.GY)throw t;throw new r.GY("Failed to fetch staff")}}async function u(t){try{let e=await (0,r.sg)("/admin/staff",t);if(e.ok&&e.data)return e.data;throw new r.GY(e.error||"Failed to create staff")}catch(t){if(t instanceof r.GY)throw t;throw new r.GY("Failed to create staff")}}async function f(t,e){try{let n=await (0,r.nc)("/admin/staff/".concat(t),e);if(n.ok&&n.data)return n.data;throw new r.GY(n.error||"Failed to update staff")}catch(t){if(t instanceof r.GY)throw t;throw new r.GY("Failed to update staff")}}async function h(){try{let t=await (0,r.R1)("/admin/menu");if(t.ok&&t.data)return t.data.filter(t=>t.active).sort((t,e)=>t.sortOrder-e.sortOrder);throw new r.GY(t.error||"Failed to fetch menu")}catch(t){if(t instanceof r.GY)throw t;throw new r.GY("Failed to fetch menu")}}async function d(t){try{let e=await (0,r.sg)("/admin/menu",t);if(e.ok&&e.data)return e.data;throw new r.GY(e.error||"Failed to create menu item")}catch(t){if(t instanceof r.GY)throw t;throw new r.GY("Failed to create menu item")}}async function l(t,e){try{let n=await (0,r.nc)("/admin/menu/".concat(t),e);if(n.ok&&n.data)return n.data;throw new r.GY(n.error||"Failed to update menu item")}catch(t){if(t instanceof r.GY)throw t;throw new r.GY("Failed to update menu item")}}async function w(){try{let t=await (0,r.R1)("/admin/settings");if(t.ok&&t.data)return t.data;throw new r.GY(t.error||"Failed to fetch settings")}catch(t){if(t instanceof r.GY)throw t;throw new r.GY("Failed to fetch settings")}}async function y(t){try{let e=await (0,r.pE)("/admin/settings",t);if(e.ok&&e.data)return e.data;throw new r.GY(e.error||"Failed to update settings")}catch(t){if(t instanceof r.GY)throw t;throw new r.GY("Failed to update settings")}}async function p(t,e){try{let n=await (0,r.nc)("/admin/reservations/".concat(t),{staffId:e});if(n.ok&&n.data)return n.data;throw new r.GY(n.error||"Failed to assign staff")}catch(t){if(t instanceof r.GY)throw t;throw new r.GY("Failed to assign staff")}}},3206:function(t,e,n){"use strict";var r,o;t.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(8041)},8041:function(t){!function(){var e={229:function(t){var e,n,r,o=t.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===a||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:a}catch(t){e=a}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(t){n=i}}();var c=[],u=!1,f=-1;function h(){u&&r&&(u=!1,r.length?c=r.concat(c):f=-1,c.length&&d())}function d(){if(!u){var t=s(h);u=!0;for(var e=c.length;e;){for(r=c,c=[];++f<e;)r&&r[f].run();f=-1,e=c.length}r=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function l(t,e){this.fun=t,this.array=e}function w(){}o.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new l(t,e)),1!==c.length||u||s(d)},l.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=w,o.addListener=w,o.once=w,o.off=w,o.removeListener=w,o.removeAllListeners=w,o.emit=w,o.prependListener=w,o.prependOnceListener=w,o.listeners=function(t){return[]},o.binding=function(t){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var a=n[t]={exports:{}},i=!0;try{e[t](a,a.exports,r),i=!1}finally{i&&delete n[t]}return a.exports}r.ab="//";var o=r(229);t.exports=o}()}},function(t){t.O(0,[530,285,749,744],function(){return t(t.s=8265)}),_N_E=t.O()}]);