"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[283],{1283:function(e,r,t){t.d(r,{Z:function(){return w}});var a=t(5853),n=t(4254),s=t(7798),d=t(3790),l=t(6659),i=t(6780),o=t(6734),c=t(2043),x=t(857),b=t(7575),m=t(7935),u=t(9452),p=t(3346);async function h(e){try{let r=await (0,d.R1)("/admin/staff/".concat(encodeURIComponent(e),"/shift"));if(r.ok&&r.data)return r.data;return{staffId:e,weekly:[],exceptions:[]}}catch(r){return console.warn("Failed to fetch shift for staff ".concat(e,":"),r),{staffId:e,weekly:[],exceptions:[]}}}async function f(e,r){try{let t=await (0,d.pE)("/admin/staff/".concat(encodeURIComponent(e),"/shift"),r);if(!t.ok)throw new d.GY("error"in t&&t.error?t.error:"Failed to update shift")}catch(e){if(e instanceof d.GY)throw e;throw new d.GY("Failed to update shift")}}var g=t(3035);let j=(0,g.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),y=(0,g.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),v=[0,1,2,3,4,5,6];function N(e){let{staffId:r,staffName:t,onClose:s,onSave:i}=e,[o,c]=(0,n.useState)([]),[b,m]=(0,n.useState)([]),[g,N]=(0,n.useState)({}),[w,k]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!0),[E,Z]=(0,n.useState)(null),A=(0,p.Ph)();(0,n.useEffect)(()=>{(async()=>{C(!0),Z(null);try{let e=await h(r);e.weekly.length>0?c(e.weekly):c((0,p.Jl)()),m(e.exceptions||[])}catch(e){console.error("Failed to load shift for ".concat(r,":"),e),Z(e instanceof Error?e.message:"シフトの読み込みに失敗しました"),c((0,p.Jl)()),m([])}finally{C(!1)}})()},[r]);let F=(e,r,t)=>{c(a=>a.map(a=>{if(a.dow===e){let e={...a,[r]:t};if("start"===r&&"string"==typeof t&&t>=e.end){let r=Math.min(60*parseInt(t.split(":")[0])+parseInt(t.split(":")[1])+30,1200);e.end="".concat(Math.floor(r/60).toString().padStart(2,"0"),":").concat((r%60).toString().padStart(2,"0"))}return e}return a})),N(r=>{let t={...r};return delete t["weekly-".concat(e)],t})},O=e=>{let r=o.find(r=>r.dow===e);r&&c(t=>t.map(t=>t.dow!==e&&t.enabled?{...t,start:r.start,end:r.end,breakStart:r.breakStart,breakEnd:r.breakEnd}:t))},Y=(e,r,t)=>{m(a=>a.map((n,s)=>{if(s===e){let d={...n,[r]:t};return"date"===r&&-1!==a.findIndex((e,r)=>r!==s&&e.date===t)?(N(r=>({...r,["exception-".concat(e)]:"この日付は既に登録されています"})),n):("type"!==r||"custom"!==t||(d.start||(d.start="10:00"),d.end||(d.end="19:00")),d)}return n})),N(r=>{let t={...r};return delete t["exception-".concat(e)],t})},M=e=>{m(r=>r.filter((r,t)=>t!==e)),N(r=>{let t={...r};return delete t["exception-".concat(e)],t})},G=()=>{let e={};o.forEach(r=>{if(r.enabled){let t=(0,p.a$)(r);t.valid||(e["weekly-".concat(r.dow)]=t.error||"無効な設定です")}}),b.forEach((r,t)=>{if("custom"===r.type){if(r.start&&r.end){let a=(0,p.a$)({enabled:!0,start:r.start,end:r.end,breakStart:r.breakStart,breakEnd:r.breakEnd});a.valid||(e["exception-".concat(t)]=a.error||"無効な設定です")}else e["exception-".concat(t)]="開始時刻と終了時刻を入力してください"}});let r=new Set;return b.forEach((t,a)=>{r.has(t.date)?e["exception-".concat(a)]="この日付は既に登録されています":r.add(t.date)}),N(e),0===Object.keys(e).length},I=async()=>{if(!G()){k(!1);return}let e={staffId:r,weekly:o,exceptions:[...b].sort((e,r)=>e.date.localeCompare(r.date))};Z(null);try{await f(r,e),i(e),k(!0),setTimeout(()=>{s()},1e3)}catch(e){Z(e instanceof d.GY?e.message:e instanceof Error?e.message:"シフトの保存に失敗しました"),k(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:s,children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-soft max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white border-b border-brand-border px-6 py-4 flex items-center justify-between z-10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-brand-text",children:"シフト設定"}),(0,a.jsx)("p",{className:"text-sm text-brand-muted mt-1",children:t})]}),(0,a.jsx)("button",{onClick:s,className:"p-2 text-brand-muted hover:bg-brand-bg rounded-lg transition-all",children:(0,a.jsx)(u.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[S&&(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"}),(0,a.jsx)("span",{className:"ml-3 text-sm text-brand-muted",children:"読み込み中..."})]}),!S&&(0,a.jsxs)(a.Fragment,{children:[w&&(0,a.jsx)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-xl",children:(0,a.jsx)("p",{className:"text-sm text-green-700",children:"保存しました"})}),E&&(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:E})}),g.exceptions&&(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:g.exceptions})}),(0,a.jsxs)(l.Z,{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-brand-text mb-4",children:"週次テンプレート"}),(0,a.jsx)("div",{className:"space-y-3",children:v.map(e=>{let r=o.find(r=>r.dow===e)||{dow:e,enabled:!1,start:"10:00",end:"19:00"},t="weekly-".concat(e),n=g[t];return(0,a.jsxs)("div",{className:"p-4 border rounded-xl ".concat(n?"border-red-300 bg-red-50":"border-brand-border bg-brand-bg"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-[100px]",children:[(0,a.jsx)("input",{type:"checkbox",id:"enabled-".concat(e),checked:r.enabled,onChange:r=>F(e,"enabled",r.target.checked),className:"w-4 h-4 text-brand-primary border-brand-border rounded focus:ring-brand-primary"}),(0,a.jsxs)("label",{htmlFor:"enabled-".concat(e),className:"text-sm font-medium text-brand-text",children:[(0,p.Ot)(e),"曜日"]})]}),r.enabled&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-xs text-brand-muted whitespace-nowrap",children:"開始"}),(0,a.jsx)("select",{value:r.start,onChange:r=>F(e,"start",r.target.value),className:"px-3 py-2 border border-brand-border rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",children:A.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-xs text-brand-muted whitespace-nowrap",children:"終了"}),(0,a.jsx)("select",{value:r.end,onChange:r=>F(e,"end",r.target.value),className:"px-3 py-2 border border-brand-border rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",children:(0,p.YC)(r.start).map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-xs text-brand-muted whitespace-nowrap",children:"休憩開始"}),(0,a.jsxs)("select",{value:r.breakStart||"",onChange:r=>F(e,"breakStart",r.target.value||void 0),className:"px-3 py-2 border border-brand-border rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",children:[(0,a.jsx)("option",{value:"",children:"なし"}),A.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),r.breakStart&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-xs text-brand-muted whitespace-nowrap",children:"休憩終了"}),(0,a.jsxs)("select",{value:r.breakEnd||"",onChange:r=>F(e,"breakEnd",r.target.value||void 0),className:"px-3 py-2 border border-brand-border rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",children:[(0,a.jsx)("option",{value:"",children:"なし"}),A.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("button",{onClick:()=>O(e),className:"px-3 py-2 text-xs text-brand-primary hover:bg-brand-bg rounded-lg transition-all flex items-center gap-1",title:"この設定を他の有効な曜日にコピー",children:[(0,a.jsx)(j,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"全曜日にコピー"})]})]})]}),n&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-2",children:g[t]})]},e)})})]}),(0,a.jsxs)(l.Z,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-brand-text",children:"例外日"}),(0,a.jsxs)("button",{onClick:()=>{let e=new Date().toISOString().split("T")[0];if(b.some(r=>r.date===e)){N(e=>({...e,exceptions:"この日付は既に登録されています"}));return}m(r=>[...r,{date:e,type:"off"}]),N(e=>{let r={...e};return delete r.exceptions,r})},className:"px-4 py-2 bg-brand-primary text-white rounded-xl text-sm font-medium hover:shadow-md transition-all flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"例外追加"})]})]}),0===b.length?(0,a.jsx)("p",{className:"text-sm text-brand-muted text-center py-8",children:"例外日がありません"}):(0,a.jsx)("div",{className:"space-y-3",children:b.map((e,r)=>{let t="exception-".concat(r),n=g[t];return(0,a.jsxs)("div",{className:"p-4 border rounded-xl ".concat(n?"border-red-300 bg-red-50":"border-brand-border bg-brand-bg"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,a.jsx)("input",{type:"date",value:e.date,onChange:e=>Y(r,"date",e.target.value),className:"px-3 py-2 border border-brand-border rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary"}),(0,a.jsxs)("select",{value:e.type,onChange:e=>Y(r,"type",e.target.value),className:"px-3 py-2 border border-brand-border rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",children:[(0,a.jsx)("option",{value:"off",children:"休み"}),(0,a.jsx)("option",{value:"custom",children:"カスタム時間"})]}),"custom"===e.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-xs text-brand-muted whitespace-nowrap",children:"開始"}),(0,a.jsx)("select",{value:e.start||"",onChange:e=>Y(r,"start",e.target.value),className:"px-3 py-2 border border-brand-border rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",children:A.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-xs text-brand-muted whitespace-nowrap",children:"終了"}),(0,a.jsx)("select",{value:e.end||"",onChange:e=>Y(r,"end",e.target.value),className:"px-3 py-2 border border-brand-border rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",children:e.start?(0,p.YC)(e.start).map(e=>(0,a.jsx)("option",{value:e,children:e},e)):A.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-xs text-brand-muted whitespace-nowrap",children:"休憩開始"}),(0,a.jsxs)("select",{value:e.breakStart||"",onChange:e=>Y(r,"breakStart",e.target.value),className:"px-3 py-2 border border-brand-border rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",children:[(0,a.jsx)("option",{value:"",children:"なし"}),A.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),e.breakStart&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-xs text-brand-muted whitespace-nowrap",children:"休憩終了"}),(0,a.jsxs)("select",{value:e.breakEnd||"",onChange:e=>Y(r,"breakEnd",e.target.value),className:"px-3 py-2 border border-brand-border rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",children:[(0,a.jsx)("option",{value:"",children:"なし"}),A.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]}),(0,a.jsx)("button",{onClick:()=>M(r),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all ml-auto",title:"削除",children:(0,a.jsx)(y,{className:"w-4 h-4"})})]}),n&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-2",children:g[t]})]},r)})})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-4 border-t border-brand-border",children:[(0,a.jsx)("button",{onClick:s,className:"flex-1 px-4 py-3 bg-white text-brand-text border border-brand-border rounded-xl font-medium hover:shadow-md transition-all",children:"キャンセル"}),(0,a.jsx)("button",{onClick:I,disabled:S,className:"flex-1 px-4 py-3 bg-brand-primary text-white rounded-xl font-medium hover:shadow-md focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"保存"})]})]})]})]})})}function w(){let[e,r]=(0,n.useState)([]),[t,p]=(0,n.useState)(!1),[h,f]=(0,n.useState)(null),[g,j]=(0,n.useState)(!1),[y,v]=(0,n.useState)(null),[w,k]=(0,n.useState)(!1),[S,C]=(0,n.useState)(""),[E,Z]=(0,n.useState)(""),[A,F]=(0,n.useState)({name:"",role:"",active:!0,sortOrder:0}),O=async()=>{p(!0),f(null);try{let e=await (0,s.Dh)();Array.isArray(e)?r(e):(console.warn("fetchStaff: staff is not an array, setting to empty array"),r([]))}catch(e){f(e instanceof d.GY?e.message:e instanceof Error?e.message:"Failed to fetch staff"),r([])}finally{p(!1)}};(0,n.useEffect)(()=>{O()},[]);let Y=e=>{v(e),F({name:e.name,role:e.role||"",active:e.active,sortOrder:e.sortOrder}),j(!0)},M=async()=>{if(!A.name.trim()){f("名前は必須です");return}p(!0),f(null);try{y?await (0,s.Qf)(y.id,{name:A.name.trim(),role:A.role.trim()||void 0,active:A.active,sortOrder:A.sortOrder}):await (0,s.jK)({name:A.name.trim(),role:A.role.trim()||void 0,active:A.active,sortOrder:A.sortOrder}),await O(),j(!1)}catch(e){f(e instanceof d.GY?e.message:e instanceof Error?e.message:"Failed to save staff")}finally{p(!1)}},G=async e=>{p(!0),f(null);try{await (0,s.Qf)(e.id,{active:!e.active}),await O()}catch(e){f(e instanceof d.GY?e.message:e instanceof Error?e.message:"Failed to update staff")}finally{p(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(i.Z,{title:"スタッフ管理",subtitle:"スタッフの追加・編集を行います。",right:(0,a.jsxs)("button",{onClick:()=>{v(null),F({name:"",role:"",active:!0,sortOrder:e.length}),j(!0)},className:"px-4 py-2 bg-brand-primary text-white rounded-xl font-medium hover:shadow-md transition-all flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"追加"})]})}),h&&(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-2xl",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:h})}),(0,a.jsx)(l.Z,{children:t&&0===e.length?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"}),(0,a.jsx)("span",{className:"ml-3 text-sm text-brand-muted",children:"読み込み中..."})]}):(0,a.jsx)(o.Z,{headers:["名前","役職","状態","操作"],rows:e.map(e=>[e.name,e.role||"-",(0,a.jsx)(c.Z,{variant:e.active?"success":"muted",children:e.active?"有効":"無効"},"status"),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{C(e.id),Z(e.name),k(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"シフト設定",children:(0,a.jsx)(b.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>Y(e),className:"p-2 text-brand-primary hover:bg-brand-bg rounded-lg transition-all",title:"編集",children:(0,a.jsx)(m.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>G(e),className:"p-2 text-brand-muted hover:bg-brand-bg rounded-lg transition-all",title:e.active?"無効化":"有効化",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})})]},"actions")])})}),g&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>j(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-soft max-w-md w-full p-6 space-y-4",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-brand-text",children:y?"スタッフを編集":"スタッフを追加"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"名前 *"}),(0,a.jsx)("input",{type:"text",value:A.name,onChange:e=>F({...A,name:e.target.value}),className:"w-full px-4 py-3 border border-brand-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",placeholder:"スタッフ名"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"役職"}),(0,a.jsx)("input",{type:"text",value:A.role,onChange:e=>F({...A,role:e.target.value}),className:"w-full px-4 py-3 border border-brand-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",placeholder:"例: Top Stylist"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"active",checked:A.active,onChange:e=>F({...A,active:e.target.checked}),className:"w-4 h-4 text-brand-primary border-brand-border rounded focus:ring-brand-primary"}),(0,a.jsx)("label",{htmlFor:"active",className:"text-sm text-brand-text",children:"有効"})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,a.jsx)("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-3 bg-white text-brand-text border border-brand-border rounded-xl font-medium hover:shadow-md transition-all",children:"キャンセル"}),(0,a.jsx)("button",{onClick:M,disabled:t||!A.name.trim(),className:"flex-1 px-4 py-3 bg-brand-primary text-white rounded-xl font-medium hover:shadow-md focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2 disabled:bg-brand-muted disabled:cursor-not-allowed transition-all",children:t?"保存中...":"保存"})]})]})}),w&&(0,a.jsx)(N,{staffId:S,staffName:E,onClose:()=>{k(!1),C(""),Z("")},onSave:e=>{console.log("Shift saved:",e)}})]})}},6659:function(e,r,t){t.d(r,{Z:function(){return n}});var a=t(5853);function n(e){let{title:r,subtitle:t,children:n,className:s=""}=e;return(0,a.jsxs)("div",{className:"rounded-2xl bg-white border border-brand-border shadow-soft p-6 md:p-8 ".concat(s),children:[r&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-brand-text",children:r}),t&&(0,a.jsx)("p",{className:"text-sm text-brand-muted mt-1",children:t})]}),n]})}},6734:function(e,r,t){t.d(r,{Z:function(){return n}});var a=t(5853);function n(e){let{columns:r,data:t,keyExtractor:n,loading:s=!1,emptyMessage:d="データがありません",onRowClick:l,headers:i,rows:o}=e,c=Array.isArray(t)?t:[],x=Array.isArray(r)?r:[],b=Array.isArray(i)?i:[],m=Array.isArray(o)?o:[];return s?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"}),(0,a.jsx)("span",{className:"ml-3 text-sm text-brand-muted",children:"読み込み中..."})]}):b.length>0?0===m.length?(0,a.jsx)("div",{className:"bg-brand-bg rounded-2xl p-8 text-center",children:(0,a.jsx)("p",{className:"text-sm text-brand-muted",children:d})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-brand-border",children:[(0,a.jsx)("thead",{className:"bg-brand-bg",children:(0,a.jsx)("tr",{children:b.map((e,r)=>(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-brand-muted uppercase tracking-wider",children:e},r))})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-brand-border",children:m.map((e,r)=>(0,a.jsx)("tr",{className:"transition-colors hover:bg-brand-bg",children:Array.isArray(e)?e.map((e,r)=>(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e},r)):null},r))})]})}):0===x.length||0===c.length?(0,a.jsx)("div",{className:"bg-brand-bg rounded-2xl p-8 text-center",children:(0,a.jsx)("p",{className:"text-sm text-brand-muted",children:d})}):n?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-brand-border",children:[(0,a.jsx)("thead",{className:"bg-brand-bg",children:(0,a.jsx)("tr",{children:x.map(e=>(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-brand-muted uppercase tracking-wider",children:e.label},e.key))})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-brand-border",children:c.map(e=>(0,a.jsx)("tr",{onClick:()=>null==l?void 0:l(e),className:"transition-colors ".concat(l?"hover:bg-brand-bg cursor-pointer":"hover:bg-brand-bg"),children:x.map(r=>{var t;return(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:r.render?r.render(e):String(null!==(t=e[r.key])&&void 0!==t?t:"")},r.key)})},n(e)))})]})}):(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 text-center",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:"keyExtractor is required when using columns/data format"})})}},6780:function(e,r,t){t.d(r,{Z:function(){return s}});var a=t(5853),n=t(4254);function s(e){let{title:r,subtitle:t,right:s}=e,[d,l]=(0,n.useState)(!1),[i,o]=(0,n.useState)(null);return(0,n.useEffect)(()=>{l(!0)},[]),(0,a.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-brand-text",children:r}),t&&(0,a.jsx)("p",{className:"text-sm text-brand-muted mt-2",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[d&&i&&(0,a.jsxs)("span",{className:"px-2 py-1 text-xs font-mono text-brand-muted bg-brand-bg border border-brand-border rounded-md",children:["api: ",i]}),s&&(0,a.jsx)("div",{className:"flex items-center gap-2",children:s})]})]})}},3346:function(e,r,t){function a(e){let[r,t]=e.split(":").map(Number);return 60*r+t}function n(){let e=[];for(let r=10;r<=20;r++)for(let t=0;t<60;t+=30){let a="".concat(r.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"));e.push(a)}return e}function s(e){let r=n(),t=a(e);return r.filter(e=>a(e)>t)}function d(e){var r,t;if(!e.enabled)return{valid:!0};if(r=e.start,t=e.end,!(a(r)<a(t)))return{valid:!1,error:"終了時刻は開始時刻より後である必要があります"};if(e.breakStart||e.breakEnd){if(!e.breakStart||!e.breakEnd)return{valid:!1,error:"休憩開始時刻と終了時刻の両方を入力してください"};if(!function(e,r,t,n){if(!t||!n)return!0;let s=a(e),d=a(r),l=a(t),i=a(n);return s<l&&l<i&&i<d}(e.start,e.end,e.breakStart,e.breakEnd))return{valid:!1,error:"休憩時間は勤務時間の範囲内である必要があります"}}return{valid:!0}}function l(){return[{dow:0,enabled:!1,start:"10:00",end:"19:00"},{dow:1,enabled:!0,start:"10:00",end:"19:00"},{dow:2,enabled:!0,start:"10:00",end:"19:00"},{dow:3,enabled:!0,start:"10:00",end:"19:00"},{dow:4,enabled:!0,start:"10:00",end:"19:00"},{dow:5,enabled:!0,start:"10:00",end:"19:00"},{dow:6,enabled:!0,start:"10:00",end:"18:00"}].map(e=>({dow:e.dow,enabled:e.enabled,start:e.start,end:e.end}))}function i(e){return["日","月","火","水","木","金","土"][e]}function o(e,r,t){if(!t)return!0;let n=new Date(e).getDay(),s=a(r),d=t.exceptions.find(r=>r.date===e);if(d){if("off"===d.type)return!1;if("custom"===d.type&&d.start&&d.end){let e=a(d.start),r=a(d.end);if(d.breakStart&&d.breakEnd){let e=a(d.breakStart),r=a(d.breakEnd);if(s>=e&&s<r)return!1}return s>=e&&s<r}}let l=t.weekly.find(e=>e.dow===n);if(!l||!l.enabled)return!1;let i=a(l.start),o=a(l.end);if(l.breakStart&&l.breakEnd){let e=a(l.breakStart),r=a(l.breakEnd);if(s>=e&&s<r)return!1}return s>=i&&s<o}t.d(r,{Jl:function(){return l},Ot:function(){return i},Ph:function(){return n},YC:function(){return s},a$:function(){return d},wS:function(){return o}})},7935:function(e,r,t){t.d(r,{Z:function(){return a}});let a=(0,t(3035).Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},9452:function(e,r,t){t.d(r,{Z:function(){return a}});let a=(0,t(3035).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}}]);