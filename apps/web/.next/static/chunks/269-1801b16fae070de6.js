(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[269],{1182:function(t,e,r){"use strict";r.d(e,{Z:function(){return h}});var n=r(5853),a=r(4254),s=r(3650),o=r(5933),i=r(7575),c=r(3872),l=r(6206),d=r(4990),u=r(4387),f=r(9916);function h(t){let{activeTab:e,setTab:r}=t,h=(0,f.usePathname)(),[m,w]=(0,a.useState)(!1);(0,a.useEffect)(()=>{w(!0)},[]);let x=null!=e?e:m&&h?h.startsWith("/admin/reservations")?"reservations":h.startsWith("/admin/menu")?"menus":h.startsWith("/admin/staff")?"staff":h.startsWith("/admin/settings")?"settings":("/admin"===h||h.startsWith("/admin/"),"dashboard"):"dashboard",p=[{id:"dashboard",label:"ダッシュボード",href:"/admin",icon:(0,n.jsx)(o.Z,{className:"w-5 h-5"})},{id:"reservations",label:"予約管理",href:"/admin/reservations",icon:(0,n.jsx)(i.Z,{className:"w-5 h-5"})},{id:"menus",label:"メニュー管理",href:"/admin/menu",icon:(0,n.jsx)(c.Z,{className:"w-5 h-5"})},{id:"staff",label:"スタッフ管理",href:"/admin/staff",icon:(0,n.jsx)(l.Z,{className:"w-5 h-5"})},{id:"settings",label:"管理者設定",href:"/admin/settings",icon:(0,n.jsx)(d.Z,{className:"w-5 h-5"})}];return(0,n.jsxs)("div",{className:"h-full flex flex-col p-6",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-xl font-bold text-white mb-1",children:"Lumiere 表参道"}),(0,n.jsx)("p",{className:"text-sm text-slate-400",children:"管理パネル"})]}),(0,n.jsx)("nav",{className:"flex-1 flex flex-col space-y-1",children:p.map(t=>{let e=x===t.id;return(0,n.jsxs)(s.default,{href:t.href,onClick:()=>{r&&r(t.id)},className:"w-full flex items-center gap-3 px-4 py-3 text-sm font-medium transition-all ".concat(e?"bg-brand-primary text-white rounded-2xl shadow-md":"text-slate-300 hover:bg-slate-800/60 hover:text-white/90 rounded-lg"),children:[(0,n.jsx)("span",{className:e?"text-white":"text-slate-400",children:t.icon}),(0,n.jsx)("span",{children:t.label})]},t.id)})}),(0,n.jsx)("div",{className:"pt-4 border-t border-slate-700/50",children:(0,n.jsxs)("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium text-slate-400 hover:bg-slate-800/60 hover:text-slate-300 transition-colors",children:[(0,n.jsx)(u.Z,{className:"w-5 h-5"}),(0,n.jsx)("span",{children:"ログアウト"})]})})]})}},2619:function(t,e,r){"use strict";r.d(e,{Z:function(){return a}});var n=r(5853);function a(t){let{sidebar:e,topbar:r,children:a}=t;return(0,n.jsxs)("div",{className:"min-h-screen bg-brand-bg flex",children:[(0,n.jsx)("aside",{className:"hidden md:flex w-[280px] bg-gradient-to-b from-brand-panel to-brand-panel2 flex-shrink-0 h-screen overflow-y-auto fixed left-0 top-0 z-20",children:e}),(0,n.jsxs)("main",{className:"flex-1 flex flex-col min-w-0 md:ml-[280px]",children:[(0,n.jsx)("div",{className:"bg-white border-b border-brand-border",children:r}),(0,n.jsx)("div",{className:"flex-1 p-6",children:(0,n.jsx)("div",{className:"max-w-[1200px] mx-auto space-y-6",children:a})})]}),(0,n.jsx)("div",{className:"md:hidden fixed top-0 left-0 right-0 bg-white border-b border-brand-border z-10 h-16 flex items-center px-4",children:(0,n.jsx)("h1",{className:"text-lg font-bold text-brand-text",children:"Lumiere 表参道"})})]})}},645:function(t,e,r){"use strict";r.d(e,{Z:function(){return o}});var n=r(5853),a=r(4254);function s(t){let{className:e="",format:r="full"}=t,[s,o]=(0,a.useState)(!1),[i,c]=(0,a.useState)("");return((0,a.useEffect)(()=>{o(!0);let t=new Date,e=new Intl.DateTimeFormat("ja-JP",{timeZone:"Asia/Tokyo",year:"numeric",month:"full"===r?"long":"numeric",day:"numeric"});if("full"===r)c(e.format(t));else{let e=t.getMonth()+1,r=t.getDate();c("".concat(e,"/").concat(r))}},[r]),s)?(0,n.jsx)("div",{className:"px-3 py-1.5 bg-brand-bg rounded-xl border border-brand-border ".concat(e),children:(0,n.jsx)("span",{className:"text-sm font-medium text-brand-text",children:i})}):(0,n.jsx)("div",{className:"px-3 py-1.5 bg-brand-bg rounded-xl border border-brand-border ".concat(e),children:(0,n.jsx)("span",{className:"text-sm font-medium text-brand-text",children:"\xa0"})})}function o(t){let{title:e,subtitle:r,right:a}=t;return(0,n.jsxs)("div",{className:"px-6 py-4 flex items-start justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold tracking-tight text-brand-text",children:e}),r&&(0,n.jsx)("p",{className:"text-sm text-brand-muted mt-1",children:r})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[a,(0,n.jsx)(s,{format:"full"})]})]})}},2043:function(t,e,r){"use strict";r.d(e,{Z:function(){return a}});var n=r(5853);function a(t){let{variant:e="success",children:r}=t;return(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium border ".concat({success:"bg-green-50 text-green-700 border-green-200",muted:"bg-slate-50 text-slate-600 border-slate-200",warning:"bg-yellow-50 text-yellow-700 border-yellow-200",danger:"bg-red-50 text-red-700 border-red-200",reserved:"bg-blue-50 text-blue-700 border-blue-200",completed:"bg-emerald-50 text-emerald-700 border-emerald-200",canceled:"bg-rose-50 text-rose-700 border-rose-200"}[e]),children:r})}},3790:function(t,e,r){"use strict";r.d(e,{GY:function(){return a},QW:function(){return c},R1:function(){return o},nc:function(){return l},pE:function(){return d},sg:function(){return i}});var n=r(3206);class a extends Error{constructor(t,e,r,n){super(t),this.name="ApiClientError",this.status=e,this.statusText=r,this.data=n}}async function s(t){var e;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=t.startsWith("/api/proxy/")?t:"".concat((n.env.NEXT_PUBLIC_API_BASE||"http://127.0.0.1:8787").replace(/\/$/,"")).concat(t.startsWith("/")?t:"/".concat(t)),o=null!==(e=r.timeout)&&void 0!==e?e:3e4,i=new AbortController,c=setTimeout(()=>i.abort(),o);try{let t;let e=await fetch(s,{...r,signal:i.signal,headers:{"Content-Type":"application/json",...r.headers}});clearTimeout(c);let n=e.headers.get("content-type");if(n&&n.includes("application/json"))try{t=await e.json()}catch(t){throw new a("Failed to parse JSON response",e.status,e.statusText)}else t=await e.text();if(!e.ok){let r=t&&"object"==typeof t&&"error"in t&&"string"==typeof t.error?t.error:t&&"object"==typeof t&&"message"in t&&"string"==typeof t.message?t.message:"API request failed: ".concat(e.status," ").concat(e.statusText);throw new a(r,e.status,e.statusText,t)}return t}catch(t){if(clearTimeout(c),t instanceof Error&&"AbortError"===t.name)throw new a("Request timeout after ".concat(o,"ms"));if(t instanceof a)throw t;if(t instanceof Error)throw new a(t.message);throw new a("Unknown error occurred")}}async function o(t,e){return s(t,{...e,method:"GET"})}async function i(t,e,r){return s(t,{...r,method:"POST",body:e?JSON.stringify(e):void 0})}async function c(t,e,r){return s(t,{...r,method:"DELETE",body:e?JSON.stringify(e):void 0})}async function l(t,e,r){return s(t,{...r,method:"PATCH",body:e?JSON.stringify(e):void 0})}async function d(t,e,r){return s(t,{...r,method:"PUT",body:e?JSON.stringify(e):void 0})}},7798:function(t,e,r){"use strict";r.d(e,{Dh:function(){return c},FJ:function(){return a},Gw:function(){return m},IF:function(){return o},Ip:function(){return x},LW:function(){return f},Ml:function(){return i},Qf:function(){return d},Rr:function(){return s},Uf:function(){return h},VP:function(){return w},jK:function(){return l},r7:function(){return u}});var n=r(3790);async function a(t,e){try{let r=new URLSearchParams({date:t});r.append("tenantId","default"),e&&"any"!==e&&r.append("staffId",e);let a=await fetch("/api/proxy/slots?".concat(r.toString()),{method:"GET",headers:{accept:"application/json"},cache:"no-store"});if(!a.ok){let t;let e=await a.text();try{t=e?JSON.parse(e):{}}catch(r){t={error:e||"HTTP ".concat(a.status)}}throw new n.GY(t.error||t.message||"Failed to fetch slots: ".concat(a.status),a.status)}return await a.json()}catch(t){if(t instanceof n.GY)throw t;throw new n.GY(t instanceof Error?t.message:"Failed to fetch slots")}}async function s(t){try{return await (0,n.sg)("/reserve",t)}catch(t){if(t instanceof n.GY)throw t;throw new n.GY("Failed to create reservation")}}async function o(t){try{let e=await (0,n.R1)("/admin/reservations?date=".concat(encodeURIComponent(t)));if(e.reservations&&!Array.isArray(e.reservations))return console.warn("getReservations: response.reservations is not an array, setting to empty array"),{...e,reservations:[]};return e}catch(t){if(t instanceof n.GY)throw t;throw new n.GY("Failed to fetch reservations")}}async function i(t){try{return await (0,n.QW)("/admin/reservations/".concat(encodeURIComponent(t)))}catch(t){if(t instanceof n.GY)throw t;throw new n.GY("Failed to cancel reservation")}}async function c(){try{let t=await (0,n.R1)("/admin/staff");if(t.ok&&t.data){if(!Array.isArray(t.data))return console.warn("getStaff: response.data is not an array, returning empty array"),[];return t.data.filter(t=>t.active).sort((t,e)=>t.sortOrder-e.sortOrder)}throw new n.GY(t.error||"Failed to fetch staff")}catch(t){if(t instanceof n.GY)throw t;throw new n.GY("Failed to fetch staff")}}async function l(t){try{let e=await (0,n.sg)("/admin/staff",t);if(e.ok&&e.data)return e.data;throw new n.GY(e.error||"Failed to create staff")}catch(t){if(t instanceof n.GY)throw t;throw new n.GY("Failed to create staff")}}async function d(t,e){try{let r=await (0,n.nc)("/admin/staff/".concat(t),e);if(r.ok&&r.data)return r.data;throw new n.GY(r.error||"Failed to update staff")}catch(t){if(t instanceof n.GY)throw t;throw new n.GY("Failed to update staff")}}async function u(){try{let t=await (0,n.R1)("/admin/menu");if(t.ok&&t.data)return t.data.filter(t=>t.active).sort((t,e)=>t.sortOrder-e.sortOrder);throw new n.GY(t.error||"Failed to fetch menu")}catch(t){if(t instanceof n.GY)throw t;throw new n.GY("Failed to fetch menu")}}async function f(t){try{let e=await (0,n.sg)("/admin/menu",t);if(e.ok&&e.data)return e.data;throw new n.GY(e.error||"Failed to create menu item")}catch(t){if(t instanceof n.GY)throw t;throw new n.GY("Failed to create menu item")}}async function h(t,e){try{let r=await (0,n.nc)("/admin/menu/".concat(t),e);if(r.ok&&r.data)return r.data;throw new n.GY(r.error||"Failed to update menu item")}catch(t){if(t instanceof n.GY)throw t;throw new n.GY("Failed to update menu item")}}async function m(){try{let t=await (0,n.R1)("/admin/settings");if(t.ok&&t.data)return t.data;throw new n.GY(t.error||"Failed to fetch settings")}catch(t){if(t instanceof n.GY)throw t;throw new n.GY("Failed to fetch settings")}}async function w(t){try{let e=await (0,n.pE)("/admin/settings",t);if(e.ok&&e.data)return e.data;throw new n.GY(e.error||"Failed to update settings")}catch(t){if(t instanceof n.GY)throw t;throw new n.GY("Failed to update settings")}}async function x(t,e){try{let r=await (0,n.nc)("/admin/reservations/".concat(t),{staffId:e});if(r.ok&&r.data)return r.data;throw new n.GY(r.error||"Failed to assign staff")}catch(t){if(t instanceof n.GY)throw t;throw new n.GY("Failed to assign staff")}}},857:function(t,e,r){"use strict";r.d(e,{Z:function(){return n}});let n=(0,r(3035).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3206:function(t,e,r){"use strict";var n,a;t.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(a=r.g.process)?void 0:a.env)?r.g.process:r(8041)},8041:function(t){!function(){var e={229:function(t){var e,r,n,a=t.exports={};function s(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function i(t){if(e===setTimeout)return setTimeout(t,0);if((e===s||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:s}catch(t){e=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var c=[],l=!1,d=-1;function u(){l&&n&&(l=!1,n.length?c=n.concat(c):d=-1,c.length&&f())}function f(){if(!l){var t=i(u);l=!0;for(var e=c.length;e;){for(n=c,c=[];++d<e;)n&&n[d].run();d=-1,e=c.length}n=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function m(){}a.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new h(t,e)),1!==c.length||l||i(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(t){return[]},a.binding=function(t){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},r={};function n(t){var a=r[t];if(void 0!==a)return a.exports;var s=r[t]={exports:{}},o=!0;try{e[t](s,s.exports,n),o=!1}finally{o&&delete r[t]}return s.exports}n.ab="//";var a=n(229);t.exports=a}()}}]);