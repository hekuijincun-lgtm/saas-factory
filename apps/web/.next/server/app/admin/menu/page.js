(()=>{var e={};e.id=372,e.ids=[372],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4231:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c}),t(9845),t(1595),t(8714);var a=t(3653),s=t(4966),n=t(6070),i=t.n(n),d=t(2555),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);t.d(r,l);let c=["",{children:["admin",{children:["menu",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9845)),"C:\\dev\\saas-factory\\apps\\web\\app\\admin\\menu\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1595)),"C:\\dev\\saas-factory\\apps\\web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,8714,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\dev\\saas-factory\\apps\\web\\app\\admin\\menu\\page.tsx"],m="/admin/menu/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/menu/page",pathname:"/admin/menu",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2040:(e,r,t)=>{Promise.resolve().then(t.bind(t,1812))},5813:(e,r,t)=>{"use strict";t.d(r,{Z:()=>b});var a=t(2064),s=t(5032),n=t(1236),i=t(8146),d=t(3721),l=t(1363),c=t(7012),o=t(2153),m=t(8048),x=t(8716),u=t(8375);function b(){let[e,r]=(0,s.useState)([]),[t,b]=(0,s.useState)(!1),[p,h]=(0,s.useState)(null),[f,g]=(0,s.useState)(!1),[v,j]=(0,s.useState)(null),[y,N]=(0,s.useState)({name:"",price:0,durationMin:60,active:!0,sortOrder:0}),w=async()=>{b(!0),h(null);try{let e=await (0,n.r7)();Array.isArray(e)?r(e):(console.warn("fetchMenu: menu is not an array, setting to empty array"),r([]))}catch(e){h(e instanceof i.GY?e.message:e instanceof Error?e.message:"Failed to fetch menu"),r([])}finally{b(!1)}},k=e=>{j(e),N({name:e.name,price:e.price,durationMin:e.durationMin,active:e.active,sortOrder:e.sortOrder}),g(!0)},Z=async()=>{if(!y.name.trim()){h("メニュー名は必須です");return}if(y.price<0){h("価格は0以上である必要があります");return}if(y.durationMin<=0){h("所要時間は1分以上である必要があります");return}b(!0),h(null);try{v?await (0,n.Uf)(v.id,{name:y.name.trim(),price:y.price,durationMin:y.durationMin,active:y.active,sortOrder:y.sortOrder}):await (0,n.LW)({name:y.name.trim(),price:y.price,durationMin:y.durationMin,active:y.active,sortOrder:y.sortOrder}),await w(),g(!1)}catch(e){h(e instanceof i.GY?e.message:e instanceof Error?e.message:"Failed to save menu item")}finally{b(!1)}},C=async e=>{b(!0),h(null);try{await (0,n.Uf)(e.id,{active:!e.active}),await w()}catch(e){h(e instanceof i.GY?e.message:e instanceof Error?e.message:"Failed to update menu item")}finally{b(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(l.Z,{title:"メニュー管理",subtitle:"メニューの追加・編集を行います。",right:(0,a.jsxs)("button",{onClick:()=>{j(null),N({name:"",price:0,durationMin:60,active:!0,sortOrder:e.length}),g(!0)},className:"px-4 py-2 bg-brand-primary text-white rounded-xl font-medium hover:shadow-md transition-all flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-5 h-5"}),a.jsx("span",{children:"追加"})]})}),p&&a.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-2xl",children:a.jsx("p",{className:"text-sm text-red-700",children:p})}),a.jsx(d.Z,{children:t&&0===e.length?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"}),a.jsx("span",{className:"ml-3 text-sm text-brand-muted",children:"読み込み中..."})]}):a.jsx(c.Z,{headers:["メニュー名","価格","所要時間","状態","操作"],rows:e.map(e=>[e.name,`\xa5${e.price.toLocaleString()}`,`${e.durationMin}分`,a.jsx(o.Z,{variant:e.active?"success":"muted",children:e.active?"有効":"無効"},"status"),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>k(e),className:"p-2 text-brand-primary hover:bg-brand-bg rounded-lg transition-all",title:"編集",children:a.jsx(x.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>C(e),className:"p-2 text-brand-muted hover:bg-brand-bg rounded-lg transition-all",title:e.active?"無効化":"有効化",children:a.jsx(u.Z,{className:"w-4 h-4"})})]},"actions")])})}),f&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>g(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-soft max-w-md w-full p-6 space-y-4",onClick:e=>e.stopPropagation(),children:[a.jsx("h2",{className:"text-xl font-semibold text-brand-text",children:v?"メニューを編集":"メニューを追加"}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"メニュー名 *"}),a.jsx("input",{type:"text",value:y.name,onChange:e=>N({...y,name:e.target.value}),className:"w-full px-4 py-3 border border-brand-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",placeholder:"メニュー名"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"価格 *"}),a.jsx("input",{type:"number",value:y.price,onChange:e=>N({...y,price:parseInt(e.target.value)||0}),className:"w-full px-4 py-3 border border-brand-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",min:"0",placeholder:"0"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"所要時間（分） *"}),a.jsx("input",{type:"number",value:y.durationMin,onChange:e=>N({...y,durationMin:parseInt(e.target.value)||60}),className:"w-full px-4 py-3 border border-brand-border rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-primary/20 focus:border-brand-primary",min:"1",placeholder:"60"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"active",checked:y.active,onChange:e=>N({...y,active:e.target.checked}),className:"w-4 h-4 text-brand-primary border-brand-border rounded focus:ring-brand-primary"}),a.jsx("label",{htmlFor:"active",className:"text-sm text-brand-text",children:"有効"})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-4",children:[a.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-3 bg-white text-brand-text border border-brand-border rounded-xl font-medium hover:shadow-md transition-all",children:"キャンセル"}),a.jsx("button",{onClick:Z,disabled:t||!y.name.trim(),className:"flex-1 px-4 py-3 bg-brand-primary text-white rounded-xl font-medium hover:shadow-md focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2 disabled:bg-brand-muted disabled:cursor-not-allowed transition-all",children:t?"保存中...":"保存"})]})]})})]})}},3721:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});var a=t(2064);function s({title:e,subtitle:r,children:t,className:s=""}){return(0,a.jsxs)("div",{className:`rounded-2xl bg-white border border-brand-border shadow-soft p-6 md:p-8 ${s}`,children:[e&&(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-brand-text",children:e}),r&&a.jsx("p",{className:"text-sm text-brand-muted mt-1",children:r})]}),t]})}},7012:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});var a=t(2064);function s({columns:e,data:r,keyExtractor:t,loading:s=!1,emptyMessage:n="データがありません",onRowClick:i,headers:d,rows:l}){let c=Array.isArray(r)?r:[],o=Array.isArray(e)?e:[],m=Array.isArray(d)?d:[],x=Array.isArray(l)?l:[];return s?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"}),a.jsx("span",{className:"ml-3 text-sm text-brand-muted",children:"読み込み中..."})]}):m.length>0?0===x.length?a.jsx("div",{className:"bg-brand-bg rounded-2xl p-8 text-center",children:a.jsx("p",{className:"text-sm text-brand-muted",children:n})}):a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-brand-border",children:[a.jsx("thead",{className:"bg-brand-bg",children:a.jsx("tr",{children:m.map((e,r)=>a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-brand-muted uppercase tracking-wider",children:e},r))})}),a.jsx("tbody",{className:"bg-white divide-y divide-brand-border",children:x.map((e,r)=>a.jsx("tr",{className:"transition-colors hover:bg-brand-bg",children:Array.isArray(e)?e.map((e,r)=>a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e},r)):null},r))})]})}):0===o.length||0===c.length?a.jsx("div",{className:"bg-brand-bg rounded-2xl p-8 text-center",children:a.jsx("p",{className:"text-sm text-brand-muted",children:n})}):t?a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-brand-border",children:[a.jsx("thead",{className:"bg-brand-bg",children:a.jsx("tr",{children:o.map(e=>a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-brand-muted uppercase tracking-wider",children:e.label},e.key))})}),a.jsx("tbody",{className:"bg-white divide-y divide-brand-border",children:c.map(e=>a.jsx("tr",{onClick:()=>i?.(e),className:`transition-colors ${i?"hover:bg-brand-bg cursor-pointer":"hover:bg-brand-bg"}`,children:o.map(r=>a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:r.render?r.render(e):String(e[r.key]??"")},r.key))},t(e)))})]})}):a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 text-center",children:a.jsx("p",{className:"text-sm text-red-700",children:"keyExtractor is required when using columns/data format"})})}},1363:(e,r,t)=>{"use strict";t.d(r,{Z:()=>n});var a=t(2064),s=t(5032);function n({title:e,subtitle:r,right:t}){let[n,i]=(0,s.useState)(!1),[d,l]=(0,s.useState)(null);return(0,a.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold text-brand-text",children:e}),r&&a.jsx("p",{className:"text-sm text-brand-muted mt-2",children:r})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[n&&d&&(0,a.jsxs)("span",{className:"px-2 py-1 text-xs font-mono text-brand-muted bg-brand-bg border border-brand-border rounded-md",children:["api: ",d]}),t&&a.jsx("div",{className:"flex items-center gap-2",children:t})]})]})}},1812:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var a=t(2064),s=t(6608),n=t(8620),i=t(3373),d=t(5813);function l(){return a.jsx(s.Z,{sidebar:a.jsx(i.Z,{}),topbar:a.jsx(n.Z,{title:"メニュー管理",subtitle:"メニューの追加・編集を行います。"}),children:a.jsx(d.Z,{})})}},8716:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});let a=(0,t(5773).Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},8375:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});let a=(0,t(5773).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9845:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(1924).createProxy)(String.raw`C:\dev\saas-factory\apps\web\app\admin\menu\page.tsx#default`)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[352,494,937,770],()=>t(4231));module.exports=a})();