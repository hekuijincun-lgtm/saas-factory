"use strict";(()=>{var e={};e.id=503,e.ids=[503],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},557:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>u,routeModule:()=>c,serverHooks:()=>d,staticGenerationAsyncStorage:()=>p});var r={};a.r(r),a.d(r,{POST:()=>l});var o=a(7849),n=a(4966),s=a(9169),i=a(805);async function l(e){let t=new URL(e.url);console.log("[proxy-oauth-callback] HIT",{href:t.href});let a=t.searchParams.toString(),r=a?`/admin/integrations/line/oauth/callback?${a}`:"/admin/integrations/line/oauth/callback";return console.log("[proxy-oauth-callback] -> upstream",{upstreamPath:r}),(0,i.Q)(e,r)}let c=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/proxy/admin/line/oauth/callback/route",pathname:"/api/proxy/admin/line/oauth/callback",filename:"route",bundlePath:"app/api/proxy/admin/line/oauth/callback/route"},resolvedPagePath:"C:\\dev\\saas-factory\\apps\\web\\app\\api\\proxy\\admin\\line\\oauth\\callback\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:u,staticGenerationAsyncStorage:p,serverHooks:d}=c,h="/api/proxy/admin/line/oauth/callback/route";function m(){return(0,s.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:p})}},805:(e,t,a)=>{a.d(t,{Q:()=>o});var r=a(1237);async function o(e,t){let a;let o=(process.env.BOOKING_API_BASE??process.env.API_BASE??process.env.NEXT_PUBLIC_API_BASE??"http://127.0.0.1:8787").replace(/\/$/,""),n=`${o}${t.startsWith("/")?t:`/${t}`}`;if("GET"!==e.method&&"HEAD"!==e.method)try{a=await e.text()}catch{}let s={"Content-Type":"application/json"},i=e.headers.get("authorization");i&&(s.Authorization=i);let l=e.headers.get("cookie");l&&(s.Cookie=l);try{let t;console.log(`[proxy] ${e.method} ${n}`);let o=await fetch(n,{method:e.method,headers:s,body:a||void 0});try{let e=await o.text();t=e?JSON.parse(e):null}catch(e){t={ok:!1,error:"Invalid JSON response"}}return r.NextResponse.json(t,{status:o.status,statusText:o.statusText})}catch(s){let a=s instanceof Error?s.message:"Proxy request failed",o=s instanceof Error?s.name:"UnknownError";if(console.error(`[proxy] Error: ${o} - ${a}`,{method:e.method,path:t,url:n}),t.includes("/line/status"))return r.NextResponse.json({kind:"error",message:`Proxy failed: ${a}`},{status:500});return r.NextResponse.json({ok:!1,error:a,url:n},{status:500})}}}};var t=require("../../../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[352,444],()=>a(557));module.exports=r})();