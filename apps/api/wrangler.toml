name = "saas-factory-api"
main = "src/index.ts"
compatibility_date = "2026-02-06"

# ===== KV (唯一・正) =====
[[kv_namespaces]]
binding = "ENVIRONMENT"
id = "b3bde2eb54cc4e91a69998c89f948b18"
preview_id = "32db8ae0d1fb42fb93b03725997da00a"

# ===== Durable Object =====
[durable_objects]
bindings = [
  { name = "SLOT_LOCK", class_name = "SlotLock" }
]

[[migrations]]
tag = "v1"
new_sqlite_classes = ["SlotLock"]

# ===== STAGING =====
[env.staging]
vars = { WEB_BASE = "https://saas-factory-web-v2.pages.dev",  LINE_LOGIN_CHANNEL_ID = "2008915612", LINE_REDIRECT_URI = "https://saas-factory-web-v2.pages.dev/api/auth/line/callback" }
name = "saas-factory-api-staging"
[[env.staging.kv_namespaces]]
binding = "ENVIRONMENT"
id = "b3bde2eb54cc4e91a69998c89f948b18"
preview_id = "32db8ae0d1fb42fb93b03725997da00a"

[env.staging.durable_objects]
bindings = [
  { name = "SLOT_LOCK", class_name = "SlotLock" }
]


# DUP_REMOVED [env.staging]
# DUP_REMOVED name = "saas-factory-api-staging"
# DUP_REMOVED 
# DUP_REMOVED 
# DUP_REMOVED 
# DUP_REMOVED 
# DUP_REMOVED 
# DUP_REMOVED [env.staging]
# DUP_REMOVED name = "saas-factory-api-staging"
# DUP_REMOVED 
# DUP_REMOVED 
# DUP_REMOVED

# ===== AUTO-ADDED production env (cloned from staging) =====
[env.production]
name = "saas-factory-api"







[[env.production.kv_namespaces]]
binding = "ENVIRONMENT"
id = "b3bde2eb54cc4e91a69998c89f948b18"
preview_id = "32db8ae0d1fb42fb93b03725997da00a"

[env.production.durable_objects]
bindings = [
  { name = "SLOT_LOCK", class_name = "SlotLock" }
]

[[migrations]]
tag = "v1-sqlite-do"


[[env.staging.d1_databases]]
binding = "DB"
database_id = "cf28ae30-8e52-4a73-8d74-36dab188fa74"

[[env.production.d1_databases]]
binding = "DB"
database_id = "cf28ae30-8e52-4a73-8d74-36dab188fa74"

